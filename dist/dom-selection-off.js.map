{"version":3,"file":"dom-selection-off.js","sources":["../src/index.js"],"sourcesContent":["//https://evanhahn.com/how-to-disable-copy-paste-on-your-website/\nconst prop = (function(){\n\n    const prefix = [\n        'Moz',\n        'Khtml',\n        'Webkit',\n        'webkit',\n        'ms',\n        'O',\n        'o'\n    ];\n\n    if(typeof document.body.style['userSelect'] !== 'undefined'){\n        return 'userSelect';\n    }\n\n    for(let i=0; i<prefix.length; i++){\n        let prop = prefix[i] + 'UserSelect';\n        if(typeof document.body.style[prop] !== 'undefined'){\n            return prop;\n        }\n    }\n\n    return null;\n}());\n\nlet SelectionOff;\n\nif(prop){\n    SelectionOff = class {\n        constructor(element, def = 'auto'){\n            this._element = element;\n            this._default = def;\n            if(element.style[prop].length){\n                this._default = element.style[prop];\n            }\n\n            this.off();\n        }\n        off(){\n            this._element.style[prop] = \"none\";\n        }\n        on(){\n            this._element.style[prop] = this._default;\n        }\n        destroy(){\n            this.on();\n            this._element = null;\n        }\n    };\n}else{\n    SelectionOff = class {\n        constructor(element){\n            this._element = element;\n            this.off();\n        }\n        off(){\n            const makeUnselectable = function(node) {\n                if (node.nodeType == 1) {\n                    node.setAttribute(\"unselectable\", \"on\");\n                }\n                let child = node.firstChild;\n                while (child) {\n                    makeUnselectable(child);\n                    child = child.nextSibling;\n                }\n            };\n\n            makeUnselectable(this._element);\n        }\n        on(){\n            const makeSelectable = function(node) {\n                if (node.nodeType == 1) {\n                    node.setAttribute(\"unselectable\", \"\");\n                }\n                let child = node.firstChild;\n                while (child) {\n                    makeSelectable(child);\n                    child = child.nextSibling;\n                }\n            };\n\n            makeSelectable(this._element);\n        }\n        destroy(){\n            this.on();\n            this._element = null;\n        }\n    };\n}\n\nexport default function selectionOff(element){\n    return new SelectionOff(element);\n}\n"],"names":["const","let"],"mappings":";;;AAAA;AACAA,IAAM,IAAI,IAAI,UAAU;;IAEpBA,IAAM,MAAM,GAAG;QACX,KAAK;QACL,OAAO;QACP,QAAQ;QACR,QAAQ;QACR,IAAI;QACJ,GAAG;QACH,GAAG;KACN,CAAC;;IAEF,GAAG,OAAO,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,KAAK,WAAW,CAAC;QACxD,OAAO,YAAY,CAAC;KACvB;;IAED,IAAIC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC;QAC9BA,IAAI,IAAI,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,YAAY,CAAC;QACpC,GAAG,OAAO,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,WAAW,CAAC;YAChD,OAAO,IAAI,CAAC;SACf;KACJ;;IAED,OAAO,IAAI,CAAC;CACf,EAAE,CAAC,CAAC;;AAELA,IAAI,YAAY,CAAC;;AAEjB,GAAG,IAAI,CAAC;IACJ,YAAY;QAAS,qBACN,CAAC,OAAO,EAAE,GAAY,CAAC;iCAAV,GAAG,MAAM;;YAC7B,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;YACxB,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;YACpB,GAAG,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC;gBAC1B,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;aACvC;;YAED,IAAI,CAAC,GAAG,EAAE,CAAC;SACd;QACD,uBAAA,GAAG,kBAAE;YACD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC;SACtC,CAAA;QACD,uBAAA,EAAE,iBAAE;YACA,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC;SAC7C,CAAA;QACD,uBAAA,OAAO,sBAAE;YACL,IAAI,CAAC,EAAE,EAAE,CAAC;YACV,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;SACxB,CAAA;;;QACJ,CAAC;CACL,IAAI;IACD,YAAY;QAAS,qBACN,CAAC,OAAO,CAAC;YAChB,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;YACxB,IAAI,CAAC,GAAG,EAAE,CAAC;SACd;QACD,uBAAA,GAAG,kBAAE;YACDD,IAAM,gBAAgB,GAAG,SAAS,IAAI,EAAE;gBACpC,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,EAAE;oBACpB,IAAI,CAAC,YAAY,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;iBAC3C;gBACDC,IAAI,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC;gBAC5B,OAAO,KAAK,EAAE;oBACV,gBAAgB,CAAC,KAAK,CAAC,CAAC;oBACxB,KAAK,GAAG,KAAK,CAAC,WAAW,CAAC;iBAC7B;aACJ,CAAC;;YAEF,gBAAgB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;SACnC,CAAA;QACD,uBAAA,EAAE,iBAAE;YACAD,IAAM,cAAc,GAAG,SAAS,IAAI,EAAE;gBAClC,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,EAAE;oBACpB,IAAI,CAAC,YAAY,CAAC,cAAc,EAAE,EAAE,CAAC,CAAC;iBACzC;gBACDC,IAAI,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC;gBAC5B,OAAO,KAAK,EAAE;oBACV,cAAc,CAAC,KAAK,CAAC,CAAC;oBACtB,KAAK,GAAG,KAAK,CAAC,WAAW,CAAC;iBAC7B;aACJ,CAAC;;YAEF,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;SACjC,CAAA;QACD,uBAAA,OAAO,sBAAE;YACL,IAAI,CAAC,EAAE,EAAE,CAAC;YACV,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;SACxB,CAAA;;;QACJ,CAAC;CACL;;AAED,AAAe,SAAS,YAAY,CAAC,OAAO,CAAC;IACzC,OAAO,IAAI,YAAY,CAAC,OAAO,CAAC,CAAC;CACpC;;;;"}